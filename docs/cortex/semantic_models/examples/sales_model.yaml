# Sales Analytics Semantic Model
# Example model for Cortex Analyst

name: sales_analytics
description: "Sales and revenue analytics"

tables:
  - name: SALES
    description: "Sales transactions"
    base_table:
      database: ANALYTICS
      schema: PUBLIC
      table: SALES
    
    dimensions:
      - name: product_name
        description: "Product name"
        expr: PRODUCT_NAME
      
      - name: product_category
        description: "Product category"
        expr: PRODUCT_CATEGORY
      
      - name: region
        description: "Sales region"
        expr: REGION
      
      - name: sale_date
        description: "Date of sale"
        expr: SALE_DATE
    
    measures:
      - name: revenue
        description: "Total revenue"
        expr: SUM(AMOUNT)
      
      - name: quantity
        description: "Total units sold"
        expr: SUM(QUANTITY)
      
      - name: avg_sale_amount
        description: "Average sale amount"
        expr: AVG(AMOUNT)
    
    filters:
      - name: last_quarter
        description: "Last quarter only"
        expr: SALE_DATE >= DATEADD(quarter, -1, CURRENT_DATE())
      
      - name: this_year
        description: "Current year"
        expr: YEAR(SALE_DATE) = YEAR(CURRENT_DATE())

  - name: CUSTOMERS
    description: "Customer information"
    base_table:
      database: ANALYTICS
      schema: PUBLIC
      table: CUSTOMERS
    
    dimensions:
      - name: customer_name
        description: "Customer name"
        expr: CUSTOMER_NAME
      
      - name: customer_segment
        description: "Customer segment"
        expr: CUSTOMER_SEGMENT
      
      - name: customer_region
        description: "Customer region"
        expr: REGION

relationships:
  - name: sales_to_customers
    from:
      table: SALES
      column: CUSTOMER_ID
    to:
      table: CUSTOMERS
      column: CUSTOMER_ID
